<!doctype html>
<html lang="en">
<head>
    <meta charset="ISO-8859-1">
    <script src="https://code.jquery.com/jquery-3.3.1.js"
			integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
			crossorigin="anonymous">
	</script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="styles/style.css">
    
	<script>
		$(function () {
			$("#header").load("header.jsp");
			$("#footer").load("footer.html");
		});
	</script>




	
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>New Article</title>
    <link rel="icon" href="imgs/tech.png">

</head>
<body>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
    <div class="font">
    <div class="container-fluid">
    <div id="header"></div>
   	<div class="header-spacing"></div>
        <div class = "form-holder">
            <h2 style="font-size: 45px;">New Article</h2>
            <br>

          


            <form action="NewArticle" name="form1" class="needs-validation" enctype="multipart/form-data" novalidate method="post">
                <div class="upload-image-container">
                    <img id="output" height="100%" width="100%"/>	
                </div>

                <br>
                <label for="file" style="cursor: pointer;" class="form-label upload-image">Upload Image</label>
                <input type="file"  accept="image/gif, image/jpeg, image/jpg, image/png" name="file" id="file" onchange="loadFile(event)" hidden required>
				<div class="invalid-feedback" style="margin-bottom:30px"> 
					Upload an image
                </div>
                
                <div class="row g-2 input-row">
                    <div class="col" style="padding-right: 20px;">

                        <label for = "title" class="form-label" style="opacity:70%;">Title</label> 

                        
                            <input name="title" type = "text" class = "form-control"  id = "title" placeholder="Mike" minlength="10" maxlength="200" onkeyup="titleLimit()" required>
                            <div class="invalid-feedback">
                                Title should be atleast 10 characters long.
                            </div>

                    </div>
                    <div class="col-1">
                        <div id="title-limit" class="limit">200</div>
   
                    </div>
                </div>

                <div class="row g-2 input-row">
                    <div class="col">
                        <label for="article" class="form-label" style="opacity:70%;">Article</label>
                        <textarea name="article" class="form-control" id="article" rows="10" maxlength="5000" minlength="100" onkeyup="articleLimit()" required></textarea>
                
                        <div class="invalid-feedback">
                            Article should be atleast 100 characters long.
                        </div>
                    </div>
                    <div class="col-1">
                        <div id="article-limit" class="limit">5000</div>
                    </div>
                
                </div>

                <div class="row g-2 input-row">
                    <div class="col">
                        <label for="tags" class="form-label" style="opacity:70%;">Tags</label>
                        <input name="tags" class="form-control" id="tags" style="width: 50%;" pattern="(#+[a-zA-Z0-9(_)]{1,})*" required/>
                
                        <div class="invalid-feedback">
                            Tag needed
                            </div>
                    </div>
                    
                
                </div>

                <div class="col-sm" style="padding: 20px 1px;">
                    <div class="form-floating mb-3" >
                        <button type="submit" class="btn bamboo form-submit">Submit</button>
                    </div>
                </div>

              
                
            </form>

        </div>
    </div>
</div>

<script>

    
    // Example starter JavaScript for disabling form submissions if there are invalid fields
(() => {
'use strict'

// Fetch all the forms we want to apply custom Bootstrap validation styles to
const forms = document.querySelectorAll('.needs-validation')


// Loop over them and prevent submission
Array.from(forms).forEach(form => {
  form.addEventListener('submit', event => {

    if (!form.checkValidity()) {
      event.preventDefault()
      event.stopPropagation()
    }
    
    form.classList.add('was-validated')

  }, false)
  
})



})()


</script>
<script>


    function articleLimit()
    {
        var upper_limit = 5000, lower_limit = 100;
        var chars = document.getElementById("article").value;
        var articleWordCount = document.getElementById("article-limit");
        articleWordCount.innerHTML = chars.length + "/" + upper_limit;

        if(chars.length > upper_limit || chars.length < lower_limit)
        {
            articleWordCount.style.color = "red";
        }
        else
        {
            articleWordCount.style.color = "green";

        }

    }

    function titleLimit()
    {
        var upper_limit = 200, lower_limit = 10;
        var chars = document.getElementById("title").value;
        var titleWordCount = document.getElementById("title-limit");
        titleWordCount.innerHTML = chars.length + "/" + upper_limit;

        if(chars.length > upper_limit || chars.length < lower_limit)
        {
            titleWordCount.style.color = "red";
        }
        else
        {
            titleWordCount.style.color = "green";

        }

    }


    var loadFile = function(event) {
        var image = document.getElementById('output');
        var image2 = document.getElementById('output2');
        image.src = URL.createObjectURL(event.target.files[0]);
        image2.src = URL.createObjectURL(event.target.files[0]);
    };
    
</script>
<div id="footer"></div>
</body>
</html>